{
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null",
    "users": {
      "$uid": {
         // Apenas o próprio usuário ou um Admin pode editar este usuário
         ".write": "$uid === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'ADMIN'",
         ".indexOn": ["email", "companyId", "unitId"]
      }
    },
    "requests": {
      ".indexOn": ["companyId", "unitId", "creatorId", "assigneeId", "status", "createdAt"]
    },
    "comments": {
      ".indexOn": ["requestId", "createdAt"]
    },
    "companies": {
      ".indexOn": ["id"]
    },
    "units": {
      ".indexOn": ["companyId"]
    }
  }
}